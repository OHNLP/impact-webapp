<mat-sidenav-container class="criteria-selector-container">
  <mat-sidenav #criteriaselector class="sidenav"
               [attr.role]="(isHandset$ | async) ? 'dialog' : 'navigation'"
               [mode]="(isHandset$ | async) ? 'over' : 'side'"
               [opened]="(isHandset$ | async) === false"
               position="end">
    <button mat-mini-fab
            color="primary"
            class="cohort-description-sidenav-toggle"
            (click)="criteriaselector.toggle()">
      <mat-icon>chevron_right</mat-icon>
    </button>
    <mat-toolbar>
      <mat-icon class="type-icon" [ngClass]="classForMatchState(this.rootMatchState)">
      </mat-icon>
      Patient Definition
      <button mat-icon-button>
        <mat-icon>help</mat-icon>
      </button>
    </mat-toolbar>
    <mat-nav-list>
      <mat-tree [dataSource]="dataSource" [treeControl]="treeControl" #tree class="patient-cohort-description-tree">
        <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
          <a mat-list-item (click)="toggleSelect(node.node_id)"
             [class.criteria-active]="appstatus.selectedPatientCriteriaFilter === node.node_id">
            <!-- Manual Padding Based on Levels -->
            <span *ngIf="node.level > 0" [style]="{'display': 'inline-block', 'width': 20 * node.level + 'px'}"></span>
            <button mat-icon-button disabled></button>
            <mat-icon class="type-icon" [attr.aria-label]="node.type + 'icon'"
                      [ngClass]="classForMatchState(node.match_state)">
            </mat-icon>
            {{getNodeName(node)}}
          </a>
        </mat-tree-node>

        <mat-tree-node *matTreeNodeDef="let node; when: hasChild">
          <div class="mat-tree-node">
            <a mat-list-item>
              <!-- Manual Padding Based on Levels -->
              <span *ngIf="node.level > 0"
                    [style]="{'display': 'inline-block', 'width': 20 * node.level + 'px'}"></span>
              <button mat-icon-button matTreeNodeToggle
                      [attr.aria-label]="'Toggle ' + node.name">
                <mat-icon class="mat-icon-rtl-mirror">
                  {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
                </mat-icon>
              </button>
              <mat-icon class="type-icon" [attr.aria-label]="node.node_type + 'icon'"
                        [ngClass]="classForMatchState(node.match_state)">
              </mat-icon>
              {{getNodeName(node)}}
            </a>
          </div>
          <!-- There is inline padding applied to this div using styles.
                    This padding value depends on the mat-icon-button width.  -->
          <div [class.patient-cohort-description-tree-invisible]="!treeControl.isExpanded(node)"
               role="group">
            <ng-container matTreeNodeOutlet></ng-container>
          </div>
        </mat-tree-node>
      </mat-tree>
    </mat-nav-list>
  </mat-sidenav>
  <mat-sidenav-content style="flex-grow: 1">
    <button mat-mini-fab
            color="primary"
            class="cohort-description-sidenav-toggle-right"
            (click)="criteriaselector.toggle()"
            *ngIf="!criteriaselector.opened">
      <mat-icon>chevron_left</mat-icon>
    </button>
    <app-patient-summary *ngIf="this.appstatus.activePatientViewTabIndex === 1"></app-patient-summary>
    <app-structured-data-summary *ngIf="this.appstatus.activePatientViewTabIndex === 2"></app-structured-data-summary>
    <app-document-summary *ngIf="this.appstatus.activePatientViewTabIndex === 3"></app-document-summary>
  </mat-sidenav-content>
</mat-sidenav-container>
